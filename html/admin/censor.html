<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>

</head>

<body>
  <div id="main">
    <a href="#">注册审核</a><br>
    <a href="manage.html">人员管理</a><br>
    <a href="company.html">外包公司</a><br>
    <a href="infro.html">人员信息</a>

    <div>
      <!-- //注册审核页面 -->
      <div>
        <h4>注册审核列表</h4>
        <table border="1">
          <div>
            <tr>
              <th>用户名</th>
              <th>姓名</th>
              <th>手机</th>
              <th>邮箱</th>
              <th>隶属公司</th>
              <th>审核</th>
            </tr>
          </div>
          <!-- 有新的待审核人员时增加到表格下 -->
          <div>

            <tr v-for="person in info">

              <td v-for="data in person">{{ data }}</td>


              <td>
                <input type="button" value="通过" @click='pass'>
                <input type="button" value="拒绝" @click='refuse'>
              </td>
            </tr>

          </div>

        </table>
      </div>
    </div>
  </div>


</body>
<script src="../../resource/vue/vue.js"></script>
<script src="../../resource/jquery/jquery.js"></script>
<script>
  // 创建一个新的 Vue 实例
  var main = new Vue({
    // DOM 元素，挂载视图模型
    el: '#main',
    // 定义属性，并设置初始值
    data: {
      info: [],
      index: '233ascms',
    },
    created() {
      var that = this;
      $.post("../../php/admin/fetchUncensored.php", {}).done((data) => {
        data = JSON.parse(data);
        
        data.forEach(user => {
          that.info.push(user);
        });
      })

    },
    // 点击菜单使用的函数
    methods: {
      //审核通过
      pass: function () {
        var that = this;
        $.post("", {
          usename: that.usename,
        }).done((data) => {
          /////
          data = JSON.parse(data);
          if (data.status == "succeed") {
            alert("审核通过");
          }
          else {

          }
        })
      },
      //拒绝通过
      refuse: function () {
        var that = this;
        $.post("", {

        }).done((data) => {
          /////
          data = JSON.parse(data);
          if (data.status == "succeed") {
            alert("拒绝注册");
          }
          else {

          }
        })
      },

    }
  })
</script>

</html>